---
const numComets = 5;

const comets = Array.from({ length: numComets }, () => ({
  top: `-20vh`,     
  left: `${Math.random() * 60 - 50}vw`,
  duration: `${(3 + Math.random() * 2).toFixed(4)}s`, 
  delay: `${(1 + Math.random() * 8).toFixed(4)}s`         
}));

---

<main id = "TopHeader">
    <header id = "Header">
        <section class="Header-Text">
           Scaleculus                      
        </section>
        <section id = "Slogan">
            
        </section>
        <img id = "Background" src ="/Scaleculus/background/mountain_sky_bg1.jpg" alt="">

        <div class="Design-Wrapper">
            <div id = "Design-Container">
            <img id = "Mascot" src = "/Scaleculus/logo/Mascot.png">
            <img class = "Header-Design" src = "/Scaleculus/logo/SubLogo.png" style="top: 35vh; left: 70vw; filter:blur(1px); width:70vh; height:auto;">
            </div>
        </div>
        
       <div class = "Line"></div>
       
    </header>
    <div id="Header-Spacer"></div>
</main>

<div class="Stars-Container">
    <div class="Star" style="top: 5vh; left: 10vw; font-size: 15vw;">✧</div>
    <div class="Star" style="top: 50vh; left: 5vw; font-size: 20vw;">✧</div>
    <div class="Star" style="top: 50vh; left: 80vw; font-size: 10vw;">✧</div>
    <div class="Star" style="top: 5vh; left: 80vw; font-size: 20vw;">✧</div>
</div>

<div class="Comets-Container">
    {comets.map((comet, i) => {
    return (
      <div
        class={`Comet comet${i}`}
        style={`top: ${comet.top}; left: ${comet.left}; animation-duration: ${comet.duration}; animation-delay: ${comet.delay};`}
      ></div>
    )
    })}
</div>

<style>
    :root {
    --wisteria: #BEADDCff;
    --shadow-grey: #141527ff;
    --petal-frost: #F7D3EBff;
    --thistle: #D7BCE4ff;
    --wisteria-2: #C493DAff;
    --amethyst-smoke: #C18EC7ff;
    --snow: #F8EEEDff;
    }
    
    body {
    background: var(--shadow-grey);
    }


    #TopHeader {
        position: relative;
        z-index: 3;
       background-color: transparent;
    }

    #Header {
    position: fixed;  
    font-family: "Fugaz One", sans-serif;
    
    background-color: var(--shadow-grey);

    height: 100vh;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;   

    text-align: center;
    text-decoration: none;

    opacity: 1;

    padding: 0rem 0rem 0rem 0rem;
    margin: 0rem 0rem 0rem;

    color: var(--snow);

    background: linear-gradient(10deg, var(--wisteria-2), var(--shadow-grey));

    border-bottom: solid 0.1rem var(--amethyst-smoke);
    box-shadow: 0px 0px 2rem 3px var(--amethyst-smoke);

    text-shadow: 0 0 15px rgba(190, 173, 220, 0.6), 
                 0 0 30px rgba(193, 142, 199, 0.4);
    z-index: 1;

    transition: all 0.5s ease;
    animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
    0% {
        text-shadow: 0 0 10px var(--amethyst-smoke), 0 0 20px var(--wisteria-2);
    }
    50% {
        text-shadow: 0 0 20px var(--amethyst-smoke), 0 0 40px var(--wisteria-2);
    }
    100% {
        text-shadow: 0 0 10px var(--amethyst-smoke), 0 0 20px var(--wisteria-2);
    }
    }

    #Header-Spacer {
    height: 100vh;
    background-color: transparent;

    transition: height 0.5s ease;
    }

    .Header-Text {
    position: relative;
    font-family: "Fugaz One", sans-serif;

    font-weight: 500;
    font-size: 8vw;
    letter-spacing: 3vw;

    text-align: center;
    color: var(--snow); 

    width: max-content;

    margin: 0 auto;

    transition: all 0.5s ease;
    z-index: 1;
        
    }

    #Slogan {
        position: relative;

        font-family: "Press Start 2P", system-ui;
        font-weight: 1000;
        font-size: 2vw;
        opacity: 1;

        color: var(--snow);
        
        height: 2vh;
        width: 55vw;
        border-radius: 0.25rem;
        
        letter-spacing: 0.1vw;
        
        transition: all 0.5s ease;
        z-index: 1;
    }

    #Slogan::after {
    content: '▮';
    display: inline-block;
    margin-left: 2px;
    animation: blink 1s infinite;
    }

    @keyframes blink {
    0%, 50%, 100% { opacity: 1; }
    25%, 75% { opacity: 0; }
    }

    .Line {
        position: absolute;
        display: flex;
        justify-content: center;
        align-items: center;

        bottom: 25vh;

        width: 30vw;
        height: 1vh;
        border-radius: 2rem;

        box-shadow: 0rem 0rem 1rem 0.1rem var(--snow);
        background-color: var(--snow);   

        opacity: 0.8;  
        z-index: 3;
    }

    #Background {
    position: absolute;
    pointer-events: none;
    background-position: center;
    background-repeat: repeat;

    top: 0rem;
    width: 100%;
    height: 100%;

    opacity: 0.25;
    filter: blur(1px) brightness(100%);
    
    transition: all 0.5s ease;

    z-index: 0;
    }

    #Mascot {
    position: absolute;
    pointer-events: none;

    top: 60vh;
    left: 15vw;
    width: 20vw;
    height: auto;

    transform: rotate(20deg);

    opacity: 1;
    filter: brightness(100%) blur(0px) drop-shadow(20px 20px 10px #000000);
    -webkit-filter: drop-shadow(20px 20px 10px #222222);
    
    transition: all 0.5s ease;

    z-index: 5;
    animation: moveElements 2.5s ease-in-out infinite;
    }

    .Header-Design {
    position: absolute;
    pointer-events: none;

    width: 20rem;
    height: 20rem;

    transform: rotate(20deg);

    opacity: 1;
    filter: brightness(100%) blur(0px) drop-shadow(20px 20px 10px #000000);
    -webkit-filter: drop-shadow(20px 20px 10px #222222);
    
    transition: all 0.5s ease;

    z-index: 5;
    animation: moveElements 3.5s ease-in-out infinite;
    }

    @keyframes moveElements {
    0%   { transform: translateY(0) rotate(20deg); }
    50%  { transform: translateY(2.5vh) rotate(15deg); }
    100% { transform: translateY(0) rotate(20deg); }
    }

    .Design-Wrapper {
    position: absolute;
    inset: 0;
    transition: all 0.5s ease;
    }

    .Design-Container {
    position: absolute;
    inset: 0;
    pointer-events: none;

    transition: all 0.5s ease;
    z-index: 0;
    }

    .Comet {
    position: absolute;
    width: 30rem;
    height: 5px;
    background-color: rgb(254, 255, 246);         
    transform: rotate(45deg);

    filter: blur(3px);

    opacity: 0.5;  
    border-radius: 100%;
    animation: moveComet 2s ease-in-out infinite;
    }   
    
    .Comets-Container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    }


   @keyframes moveComet {
    0% {
        transform: translate(0px, 0px) rotate(45deg);
    }
    100% {
        transform: translate(1800px, 1600px) rotate(50deg);
    }
    }

    .Stars-Container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none; 
    z-index: 3; 
    transition: transform 0.6s ease;
    }

    .Star {
    position: absolute;
    color: transparent;
    font-weight: 1000;

    text-shadow: 
        -.5rem -.5rem 0.5rem var(--snow),   
        0 0 1rem var(--wisteria-2);

    opacity: 1;
    transition: all 0.5s ease;

    animation-name: move_stars;
    animation-duration: auto; 
    animation-timing-function: linear;
    animation-fill-mode: both; 

    animation: sparkle 2s ease-in-out infinite, shake 0.15s linear infinite;    
    }

    .Star:nth-child(2) { animation: sparkle 1.5s ease-in-out infinite, shake 0.15s linear infinite; }
    .Star:nth-child(3) { animation: sparkle 2.5s ease-in-out infinite, shake 0.15s linear infinite; }
    .Star:nth-child(4) { animation: sparkle 1.8s ease-in-out infinite, shake 0.15s linear infinite; }
    .Star:nth-child(5) { animation: sparkle 2.2s ease-in-out infinite, shake 0.15s linear infinite; }

    @keyframes sparkle {
    0%, 49%, 55%, 100% 
    { 
        opacity: 1; 
        text-shadow: -.5rem -.5rem 1rem var(--snow), 0 0 1rem var(--wisteria-2);
    }
    50% { 
        opacity: 0.3; 
        text-shadow: -.5rem -.5rem 0.5rem var(--snow), 0 0 1rem var(--wisteria-2);
    }
    }
    
    @keyframes shake {
    0% { transform: translate(0, 0); }
    25% { transform: translate(-1px, 1px); }
    50% { transform: translate(1px, -1px); }
    75% { transform: translate(-1px, -1px); }
    100% { transform: translate(0, 0); }
    }

    @keyframes move_stars {
        0% { transform: translate(0, 0); }
    100% { transform: translate(0, 300px); }
    }

</style>    

<script is:inline>
    window.onscroll = function() {scrollFunction()};
    
    const Header = document.getElementById('Header');
    const HeaderText = document.querySelector('.Header-Text');
    const Spacer = document.getElementById('Header-Spacer');
    const Stars = document.querySelector('.Stars-Container');

    const DesignContainer = document.querySelector('.Design-Wrapper');

    const Background = document.getElementById('Background');

function scrollFunction() {
  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
    Header.style.height = "10vh";

    HeaderText.style.fontWeight = "100";
    HeaderText.style.fontSize  = "2vw";
    HeaderText.style.letterSpacing = "1vw";

    Spacer.style.height = "60vh";

    Slogan.style.opacity = "0";
    Slogan.style.maxHeight = '0';

    Stars.style.transform = "translateY(-100vh)";

    DesignContainer.style.transform = "translateY(-120vh)";

    Background.style.filter = "blur(5px) brightness(50%)";
  } else {
    Header.style.height = "100vh";

    HeaderText.style.fontWeight = "500";
    HeaderText.style.fontSize = "8vw";
    HeaderText.style.letterSpacing = "3vw";

    Spacer.style.height = "100vh";

    Slogan.style.opacity = "1";
    Slogan.style.maxHeight = "2vh";   

    Stars.style.transform = "translateY(0)";

    DesignContainer.style.transform = "translateY(0)";

    Background.style.filter = "blur(1px) brightness(100%)";
  }
} 

const Slogan = document.getElementById('Slogan');
const Text = "Interactive Calculus Learning Platform";
let index = 0;
const speed = 80; 

function typeSlogan() {
  if (index < Text.length) {
    Slogan.textContent += Text.charAt(index);
    index++;
    setTimeout(typeSlogan, speed);
  }
}


window.addEventListener('DOMContentLoaded', () => {
  typeSlogan();
});

</script>

